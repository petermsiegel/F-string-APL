<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>âˆ†F_Help</title>
	<style>
		/* Basic styles for readability */
		body {
			font-family: sans-serif;
			max-width: 800px;
			margin: 2em auto;
			padding: 0 1em;
			line-height: 1.6;
		}
		img { max-width: 100%; height: auto; }
		pre { background-color: #f4f4f4; padding: 1em; overflow-x: auto; }
		code { font-family: monospace; }
	</style>
</head>
<body>
	<!--
Preview side-by-side: cmd-K, V,
md->HTML: opt-shift-M
Update APL âˆ†F_Help.html: â•SH 'cp index.html âˆ†F_Help.html' â—‡ âˆ†Fâ¨'help'
-->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/5.8.1/github-markdown.css">
<!-- . Style stuff related to APL and my random preferences... -->
<style> 
  p {
    font-family: Georgia;
    font-size: 110%;
    line-height: 1.2;
  }
  li {
  }
  /* Inline code */
  code { 
    font-size: 110%;
    background-color: #ddfafaff;
    padding: 2px 4px;
    border-radius: 3px;
    font-family: "APL386 Unicode", APL385, "APL385 Unicode", 
       "Courier New", Courier, Lucida Console", "Consolas", monospace;
  }
  /* Code blocks */ 
  pre { 
    background-color: #ddfafaff;  
    color: #0a0a0aff; 
    font-size: 110%;
    line-height: 105%;
    padding: 15px;
    border-radius: 5px;
    overflow-x: auto; 
    font-family: "APL386 Unicode", APL386, "APL385 Unicode", APL385, "Courier New", Courier,
    "Lucida Console", "Consolas", monospace;
  }
  table {
    background-color: #eae9ebaa;
    line-height: 1.1;
    vertical-align: top;
    font-family: "APL386 Unicode", APL386, "APL385 Unicode", APL385 "Courier New", Courier,
    "Lucida Console", "Consolas", monospace;
  }
  /* Table header */
  th {  
    line-height: 1.1;
    vertical-align: top;
    font-weight: 900;
    background-color: #740000ff;
    color: #f3efef;
  }
  td {
    vertical-align: top;
  }
  blockquote {
    font-size: 110%;
    background-color: #f4f5f5ff;  
  }
  .content-with-bar {
    border-left: 2px solid #ea2f0eff; /* Adjust color and thickness as needed */
    padding-left: 15px; /* Space between the bar and content */
    margin-left: 0px; /* Optional: Space from the left edge of the page */
    height: auto; /* Or set a fixed height, e.g., 200px */
    overflow: hidden; /* Clear floats if internal content uses them */
  }
</style>
<h2>âˆ†F â€” Formatted String Literals</h2>
<h3>âˆ†F In Brief</h3>
<blockquote>
<center><p style="padding-left: 15px;padding-right: 5px;padding-bottom: 5px;color: white; background-color: #4f62f0ff;"><b>âˆ†F</b> is a function for Dyalog APL that interprets <i>&ThinSpace;f-strings</i>, a concise, yet powerful way to display multiline Unicode text and complex, often multidimensional expressions in an APL-friendly style.Â¹<sup>,</sup>Â²<br><span style="color: pink;margin-top: 10px;display: block;">Inspired by Python's <i>&ThinSpace;f-strings</i>,Â³ &ensp;but designed for APL.&nbsp;</span></p></center>
</blockquote>
<hr>
<p><strong>âˆ†F</strong> f-strings can concisely include:</p>
<ul>
<li>
<p><strong>Text fields</strong>, expressions that can generate multiline Unicode text, using the sequence <code>`â—‡</code> (<strong>backtick</strong> + <strong>statement separator</strong>) to generate a newline (<small><strong>â•UCSÂ 13</strong></small>);</p>
</li>
<li>
<p><strong>Code fields</strong>, allowing users to evaluate and display APL arrays in the user environment, arrays passed as <strong>âˆ†F</strong> arguments, as well as arbitrary APL expressions based on full multi-statementâ´ dfn logic; each <strong>Code field</strong> must return a value, simple or otherwise, which will be aligned and catenated with other fields and returned from <strong>âˆ†F</strong>;</p>
<p><strong>Code fields</strong> also provide a number of concise, convenient extensions, such as:</p>
<ul>
<li>
<p><strong>Quoted strings</strong> in <strong>Code fields</strong>, with several quote styles:</p>
<ul>
<li><strong>double-quotes</strong> <code>{&quot;like this&quot;}</code> or this <code> {&quot;on`â—‡&quot;&quot;three&quot;&quot;`â—‡lines&quot;}</code>,</li>
<li><strong>single-quotes</strong>, <em>distractingly</em> <code>{''shown ''''right'''' here''}'</code>, <em>or even</em></li>
<li><strong>double angle quotation marks</strong>,âµ i.e. <em>guillemets</em>,<br>
<code>{Â«with internal quotes like &quot;this&quot; or ''this''.Â»}</code>;</li>
</ul>
</li>
<li>
<p>Simple shortcutsâ¶ for</p>
<ul>
<li><strong>format</strong>ting numeric arrays, <strong>$</strong> (short for <strong>â•FMT</strong>): <code>{&quot;F7.5&quot; $ ?0 0}</code>,</li>
<li>putting a <strong>box</strong> around a specific expression, <strong>`B</strong>: <code>{`B â³2 2}</code>,</li>
<li>placing the output of one expression <strong>above</strong> another, <strong>%</strong>: <code>{&quot;Pi&quot;% â—‹1}</code>,</li>
<li>formatting <strong>date</strong> and <strong>time</strong> expressions from APL timestamps (<strong>â•TS</strong>) using <strong>`T</strong> ( short for an expression with <strong>1200âŒ¶</strong> and <strong>â•DT</strong>): <code>{&quot;hh:mm:ss&quot; `T â•TS}</code></li>
<li><em>and more</em>;</li>
</ul>
</li>
<li>
<p>Simple mechanisms for concisely formatting and displaying data from</p>
<ul>
<li>user arrays or arbitrary code: <br><code>{tempC}</code> or <code>{tempC&lt;100: 32+tempCÃ—9Ã·5 â—‡ &quot;Too hot&quot;}</code>,
<br></li>
<li>arguments to <strong>âˆ†F</strong> that follow the format string: <code>{32+`âµ1Ã—9Ã·5}</code>, where <code>`âµ1</code> is a shortcut for <code>(âµâŠƒâ¨1+â•IO)</code>;</li>
<li><em>and more</em>;</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>Space fields</strong>, providing a simple mechanism both for separating adjacent <strong>Text fields</strong> and inserting (rectangular) blocks of any number of spaces between any two fields, where needed;</p>
<ul>
<li>one space: <code>{Â }</code>; five spaces: <code>{Â Â Â Â Â }</code>; or even, zero spaces: <code>{}</code>;</li>
<li>1000 spaces? Use a code field instead: <code>{1000â´&quot;&quot;}</code>.</li>
</ul>
</li>
<li>
<p>Multiline (matrix) output built up field-by-field, left-to-right, from values and expressions in the calling environment or arguments to <strong>âˆ†F</strong>;</p>
<ul>
<li>After all fields are generated, they are concatenated (after appropriate vertical conformation) to form a single <strong><em>returned</em></strong> character matrix, as in this simple example:</li>
</ul>
<pre><code>  tempCâ† âª35 85
  â´â•â† âˆ†F 'The temperature is {tempC}{2 2â´&quot;âˆ˜C&quot;} or {32+tempCÃ—9Ã·5}{2 2â´&quot;âˆ˜F&quot;}'
The temperature is 35âˆ˜C or  95âˆ˜F.
                   85âˆ˜C    185âˆ˜F
2 32
</code></pre>
</li>
</ul>
<p><strong>âˆ†F</strong> is designedâ· for ease of use, <em>ad hoc</em> debugging, fine-grained formatting and informal user interaction, built using APLâ€™s own powerful functions and operators.</p>
<div style="margin-left: 20px;">
<table>
<thead>
<tr>
<th style="text-align:left">Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">Â¹ Throughout this documentation, notably in the many examples, an index origin of zero (<code>â•IO=0</code>) is assumed. <strong>Code fields</strong> inherit the index origin and other system variables from the environment (i.e. namespace) in which <strong>âˆ†F</strong> is called; they can be set locally in the code field, as well: <code>âˆ†F '{ â•IOâ†1 â—‡ â•A â³ &quot;APL&quot; }'</code> .</td>
</tr>
<tr>
<td style="text-align:left">Â² In this document, we use the symbol <code>â—‡</code> (<code>â•UCS 9671</code>) to represent the APL statement separator (<code>â•UCS 8900</code>), since the latter is displayed <em>in some browsers</em> as a hard-to-read glyph. <strong>âˆ†F</strong> will recognize <code>`â—‡</code> with <em>either</em> glyph.</td>
</tr>
<tr>
<td style="text-align:left">Â³ <strong>âˆ†F</strong> is inspired by Python <em><a href="https://docs.python.org/3/tutorial/inputoutput.html#formatted-string-literals">f-strings</a></em>, short for â€œ<strong>formatted string literals</strong>â€, but designed for APLâ€™s multi-dimensional worldview. <strong>âˆ†F</strong> f-strings and Pythonâ€™s are not compatible.</td>
</tr>
<tr>
<td style="text-align:left">â´ <strong>âˆ†F Code fields</strong> <em>as input</em> are limited to a single, possibly very long, line.</td>
</tr>
<tr>
<td style="text-align:left">âµ <strong>Double angle quotation marks</strong> <big><strong>Â«Â Â»</strong></big> (<em>guillemets</em>) are Unicode chars <code>â•UCS 171 187</code> (on the std Mac keyboard: <em><em>option-backslash</em></em> and <em><em>option-shift-backslash</em></em>). When including literal guillemets in guillemet-bracketed quotations (<span style="color: red;"><em>but why?</em></span>â€‰), opening guillemets <big><strong>Â«</strong></big> are <em>not</em> doubled, but <em>two</em> closing guillemets are needed for each literal <big><strong>Â»</strong></big> required.</td>
</tr>
<tr>
<td style="text-align:left">â¶ Details on all the shortcuts are provided later in this document. See <strong><em>Code Field Shortcuts.</em></strong></td>
</tr>
<tr>
<td style="text-align:left">â· As a prototype, <strong>âˆ†F</strong> is relatively slow, using an APL recursive scan to analyze the <strong>f-string</strong>.</td>
</tr>
</tbody>
</table>
</div>
<hr>
<h2>âˆ†F <strong>Help</strong> Information</h2>
<blockquote>
<p>To display this <strong>HELP</strong> information, type: <code>âˆ†Fâ¨ 'help'</code>.</p>
</blockquote>
<h2>Installing <strong>âˆ†F</strong></h2>
<ol>
<li>
<p>On Github, search for <code>&quot;F-string-APL&quot;</code>.</p>
</li>
<li>
<p>Copy the files <strong>âˆ†Fapl.dyalog</strong> and <strong>âˆ†F_Help.html</strong> into your current working directory (the one shown via <code>]cd</code>).</p>
</li>
<li>
<p>Then, from your Dyalog session (typically <code>#</code> or <code>â•SE</code>), enter:</p>
<p><code>]load âˆ†Fapl [-target=</code><strong><em>myns</em></strong><code>]</code></p>
<p>The <code>]load</code> will automa<i>g</i>ically copy <strong>âˆ†F_Help.html</strong> into namespace <strong>â™Fapl</strong> or note its absence.</p>
</li>
</ol>
<blockquote>
<p>Now, <strong>âˆ†F</strong> is available in the active namespace (or <strong><em>myns</em></strong>), along with <strong>â™Fapl</strong> (which contains utilities used by <strong>âˆ†F</strong>).</p>
</blockquote>
<hr>
<h2>âˆ†F EXAMPLES</h2>
<p>Before providing information on <strong>âˆ†F</strong> syntax and other details, <em>letâ€™s start with some examples</em>â€¦</p>
<p>Set some values weâ€™ll need for our examplesâ€¦</p>
<pre><code>   â•RL â•IO â•MLâ†2342342 0 1         â â•RL: Ensure our random #s aren't random!
</code></pre>
<h3>Code Fields</h3>
<p>Here are <strong>Code fields</strong> with simple variables.</p>
<pre><code>   nameâ† 'Fred' â—‡ ageâ† 43
   âˆ†F 'The patient''s name is {name}. {name} is {age} years old.'
The patient's name is Fred. Fred is 43 years old.
</code></pre>
<p>And <strong>Code fields</strong> with arbitrary expressions.</p>
<pre><code>   namesâ† 'Mary' 'Jack' 'Tony' â—‡ prizeâ† 1000
   âˆ†F 'Customer {namesâŠƒâ¨ ?â‰¢names} wins Â£{?prize}!'
Customer Jack wins Â£80!
   âˆ†F 'Customer {namesâŠƒâ¨ ?â‰¢names} wins Â£{?prize}!'
Customer Jack wins Â£230!
</code></pre>
<p>Isnâ€™t Jack lucky, winning twice in a row!</p>
<h3>Space Fields</h3>
<p>Now, letâ€™s add in some <strong>Space fields</strong>.
Below, we have some multi-line <strong>Text fields</strong> separated by non-null <strong>Space fields</strong>.</p>
<ul>
<li>The backtick is our â€œescapeâ€ character.</li>
<li>The sequence `â—‡ generates a new line in the current text field.</li>
<li>{Â } is a <strong>Space Field</strong> indicating <em>one</em> space, since there is one space
within the braces.</li>
</ul>
<p>A <strong>Space field</strong> is useful here because each multi-line field is built
in its own rectangular space.</p>
<pre><code>   âˆ†F 'This`â—‡is`â—‡an`â—‡example{ }Of`â—‡multi-line{ }Text`â—‡Fields'
This    Of         Text
is      multi-line Fields
an
example
</code></pre>
<h3>Null Space Fields</h3>
<p>Two adjacent <strong>Text fields</strong> can be separated by a Null <strong>Space field</strong> <code>{}</code>,
for example when at least one field contains multiline input that you
want formatted separately from others, i.e. keeping each field in is own rectangular space:</p>
<pre><code>   âˆ†F 'Cat`â—‡Elephant `â—‡Mouse{}Felix`â—‡Dumbo`â—‡Mickey'
Cat      Felix
Elephant Dumbo
Mouse    Mickey
</code></pre>
<p>In the above example, we added an extra space after the longest
animal name, <em>Elephant</em>.</p>
<p><strong>But wait! Thereâ€™s an easier way!</strong></p>
<p>Here, you surely want the lefthand field to be guaranteed to have a space
after <em>each</em> word without fiddling, so a <strong>Space field</strong> with at least
one space would be way more convenient:</p>
<pre><code>   âˆ†F 'Cat`â—‡Elephant`â—‡Mouse{ }Felix`â—‡Dumbo`â—‡Mickey'
Cat      Felix
Elephant Dumbo
Mouse    Mickey
</code></pre>
<h3>Code Fields (Continued)</h3>
<p>And this is the same example, but with two <strong>Code fields</strong> separated
by a <strong>Text field</strong> with a single space.</p>
<pre><code>   âˆ†F '{â†‘&quot;Cat&quot; &quot;Elephant&quot; &quot;Mouse&quot;} {â†‘&quot;Felix&quot; &quot;Dumbo&quot; &quot;Mickey&quot;}'
Cat      Felix
Elephant Dumbo
Mouse    Mickey
</code></pre>
<p>Hereâ€™s a similar example with double quote-delimited strings in <strong>Code fields</strong> with
the newline sequence, <code>`â—‡</code>:</p>
<pre><code>   âˆ†F '{&quot;This`â—‡is`â—‡an`â—‡example&quot;} {&quot;Of`â—‡Multi-line&quot;} {&quot;Strings`â—‡in`â—‡Code`â—‡Fields&quot;}'
This    Of         Strings
is      Multi-line in
an                 Code
example            Fields
</code></pre>
<p>Here is some multiline data weâ€™ll add to our <strong>Code fields</strong>, using APL <em>mix</em> <code>â†‘</code> to generate multiline objects (matrices).</p>
<pre><code>   fnâ† 'John' 'Mary' 'Ted'
   lnâ† 'Smith' 'Jones' 'Templeton'
   addrâ† '24 Mulberry Ln' '22 Smith St' '12 High St'
   âˆ†F '{â†‘fn} {â†‘ln} {â†‘addr}'
John Smith     24 Mulberry Ln
Mary Jones     22 Smith St
Ted  Templeton 12 High St
</code></pre>
<p>Hereâ€™s a slightly more interesting code expression, using the shortcut <code>$</code> (<code>â•FMT</code>)
to round Centrigade numbers to the nearest whole degree and Fahrenheit numbers to the nearest tenth of a degree.
(We could have used <code>0â•âª</code> and <code>1â•âª</code>, of course.)</p>
<pre><code>   Câ† 11.3 29.55 59.99
   âˆ†F 'The temperature is {&quot;I2&quot; $ C}âˆ˜C or {&quot;F5.1&quot;$ 32+9Ã—CÃ·5}'
The temperature is 11âˆ˜C or  52.3
                   30       85.2
                   60      140.0
</code></pre>
<h3>The Box Shortcut</h3>
<p>Here we place boxes around key <strong>Code fields</strong> in this same example to introduce the shortcut <code>`B</code> (Box).</p>
<pre><code>   Câ† 11.3 29.55 59.99
   âˆ†F '`â—‡The temperature is {`B &quot;I2&quot; $ C}`â—‡Â°C or {`B &quot;F5.1&quot; $ 32+9Ã—CÃ·5}`â—‡Â°F'
                   â”Œâ”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”
The temperature is â”‚11â”‚Â°C or â”‚ 52.3â”‚Â°F
                   â”‚30â”‚      â”‚ 85.2â”‚
                   â”‚60â”‚      â”‚140.0â”‚
                   â””â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”˜
</code></pre>
<h3>Box Mode</h3>
<p>What if you want to place a box around every <strong>Code</strong>, <strong>Text</strong>, <strong><em>and</em></strong> <strong>Space field</strong>?</p>
<p>We can just use <strong>Box mode</strong>: <code>0 0 1 âˆ†F...</code>, i.e. where <code>âº[2]=1</code>.
While we canâ€™t place boxes around text (or space) fields using <code>`B</code>,
we can place a box around EACH field regardless of type by setting the
third <strong>âˆ†F</strong> option (âº[2]) to <code>1</code>, i.e. setting <strong>âˆ†F</strong>â€™s left argument to <code>0 0 1</code>:</p>
<pre><code>   Câ† 11.3 29.55 59.99
   0 0 1 âˆ†F '`â—‡The temperature is {&quot;I2&quot; $ C}`â—‡Â°C or {&quot;F5.1&quot; $ 32+9Ã—CÃ·5}`â—‡Â°F'
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”
â”‚                   â”‚11â”‚      â”‚ 52.3â”‚  â”‚
â”‚The temperature is â”‚30â”‚Â°C or â”‚ 85.2â”‚Â°Fâ”‚
â”‚                   â”‚60â”‚      â”‚140.0â”‚  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”˜
</code></pre>
<p>We said you could place a box around every field, but thereâ€™s an exception.
<strong>Null Space fields</strong> <code>{}</code>, i.e. 0-width <strong>Space fields</strong>, are discarded once theyâ€™ve done their work of separating adjacent <strong>Text fields</strong>, so they wonâ€™t be placed in boxes. Try this expression on your own:</p>
<pre><code>   0 0 1 âˆ†F 'abc{}def{}{}ghi{&quot;&quot;}jkl{ }mno'
</code></pre>
<p>In contrast, <strong>Code fields</strong> that return null values (like <code>{&quot;&quot;}</code> above) <em>will</em> be displayed!</p>
<h3>Omega Shortcuts (Explicit)</h3>
<blockquote>
<blockquote>
<p>Referencing <strong>âˆ†F</strong> arguments after the f-string: Omega shortcut expressions like <code>`âµ1</code></p>
</blockquote>
</blockquote>
<p>The expression <code>`âµ1</code> is equivalent to <code>(âµâŠƒâ¨ 1+â•IO)</code>, selecting the first argument after the f-string. Similarly, <code>`âµ99</code> would select <code>(âµâŠƒâ¨99+â•IO)</code>.</p>
<p>We will use <code>`âµ1</code> here, both with shortcuts and an externally defined
function <code>C2F</code>, that converts Centigrade to Fahrenheit.
A bit further below, we discuss bare <code>`âµ</code>
(i.e. without an appended non-negative integer).</p>
<pre><code>   C2Fâ† 32+9Ã—Ã·âˆ˜5
   âˆ†F 'The temperature is {&quot;I2&quot; $ `âµ1}Â°C or {&quot;F5.1&quot; $ C2F `âµ1}Â°F' (11 15 20)
The temperature is 11Â°C or 51.8Â°F
                   15      59.0
                   20      68.0
</code></pre>
<h3>Referencing the F-string Itself</h3>
<p>The expression <code>`âµ0</code> refers to the f-string itself.Â¹ Try this yourself:Â²</p>
<pre><code>   âˆ†F 'Our string {`âµ0â†“} is {â‰¢`âµ0} characters'
</code></pre>
<div style="margin-left: 20px;">
<table>
<thead>
<tr>
<th style="text-align:left">Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">Â¹ Independent of whether there are additional elements of the right argument to <strong>âˆ†F</strong>.</td>
</tr>
<tr>
<td style="text-align:left">Â² We explain the <code>â†“</code> before the closing brace <code>}</code> under <strong><em>Self-Documenting Code Fields</em></strong> below.</td>
</tr>
</tbody>
</table>
</div>
<h3>The Format Shortcut</h3>
<blockquote>
<p>Letâ€™s add commas to some very large numbers using the <code>$</code> (<code>â•FMT</code>) shortcut.</p>
</blockquote>
<p>We can use Dyalogâ€™s built-in formatting specifier â€œCâ€ with shortcut <code>$</code> (<code>â•FMT</code>)
to add appropriate commas to the temperatures!</p>
<pre><code>â  The temperature of the sun at its core in degrees C.
   sun_coreâ† 15E6                   â 15000000 is a bit hard to parse!
   **âˆ†F** 'The sun''s core is at {&quot;CI10&quot; $ sun_core}Â°C or {&quot;CI10&quot; $ C2F sun_core}Â°F'
The sun's core is at 15,000,000Â°C or 27,000,032Â°F
</code></pre>
<h3>The Shortcut for Numeric Commas</h3>
<p>The <code>`C</code> shortcut adds commas every 3 digits (from the right) to one or more numbers or numeric strings.Â¹ It has an advantage over the <code>$</code> (Dyalogâ€™s <code>â•FMT</code>) specifier: it doesnâ€™t require you to guesstimate field widths.</p>
<div style="margin-left: 20px;">
<table>
<thead>
<tr>
<th style="text-align:left">Note</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">Â¹ Typically, each number or numeric string presented to <code>`C</code> will represent an integer, but if a real number is presented, only the integer part will have commas added.</td>
</tr>
</tbody>
</table>
</div>
<p>Letâ€™s use the <code>`C</code> shortcut to add the commas to the temperatures!</p>
<pre><code>   sun_coreâ† 15E6               â 15000000 is a bit hard to parse!
   **âˆ†F** 'The sun''s core is at {`C sun_core}Â°C or {`C C2F sun_core}Â°F.'
The sun's core is at 15,000,000Â°C or 27,000,032Â°F.
</code></pre>
<p>Cool! OK, not literally.</p>
<p>And for a bit of a twist, letâ€™s display either degrees Centrigrade
or Fahrenheit under user control (<code>1</code> =&gt; F, <code>0</code> =&gt; C). Here, we establish
the format-string <code>sunFC</code> first, then pass it to <strong>âˆ†F</strong> with an additional argument.</p>
<pre><code>   sunFCâ† 'The sun''s core is at {`C C2Fâ£`âµ1âŠ¢ sun_core}Â°{ `âµ1âŠƒ &quot;CF&quot;}.'
   âˆ†F sunFC 1
The sun's core is at 27,000,032Â°F.
   âˆ†F sunFC 0
The sun's core is at 15,000,000Â°C.
</code></pre>
<h3>The Quote Shortcut</h3>
<blockquote>
<p>Placing quotes around string elements of an array.</p>
</blockquote>
<p>The <strong>Quote</strong> shortcut <code>`Q</code> recursively scans its right argument, looking for character
scalars, vectors, and rows of character arrays, doubling internal single quotes and
placing single quotes around each such element. Non-character data is returned as is. This is useful, for example, when you wish to clearly distinguish character from numeric data.</p>
<p>Letâ€™s look at a couple of simple examples:</p>
<p>First, letâ€™s use the <code>`Q</code> shortcut to place quotes around the simple character
arrays in its right argument, <code>âµ</code>. This is useful when you want to distinguish between character output that might include numbers and <em>actual</em> numeric output.</p>
<pre><code>   âˆ†F '{`Q 1 2 &quot;three&quot; 4 5 (âª1 &quot;2&quot;) (âª&quot;cats&quot; &quot;dogs&quot;)}'
1 2  'three'  4 5     1    'cats'
                    '2'    'dogs'
</code></pre>
<p>And hereâ€™s an example with a simple, mixed vector.
First, we display an object without using the <strong>Quote</strong> shortcut.
Are you <strong><em>sure</em></strong> which elements are numbers and which are character scalars?</p>
<pre><code>   âˆ†F '{1 2 &quot;3&quot; 4 &quot;5&quot;}'
1 2 3 4 5
</code></pre>
<p>Now, we show it <strong><em>with</em></strong> the <strong>Quote</strong> shortcut.
Voila, quotes appear around the character digits, but not the actual numbers!</p>
<pre><code>   âˆ†F '{`Q 1 2 &quot;3&quot; 4 &quot;5&quot;}'
1 2 '3' 4 '5'
</code></pre>
<h3>The Wrap Shortcut <span style="color: red;">(Experimental)</span></h3>
<blockquote>
<p>Wrapping results in left and right decorators</p>
</blockquote>
<div class="content-with-bar">
<p>Here we make a quick mention of the <strong><em>experimental</em></strong> shortcut <strong>Wrap</strong>,Â¹ <code>`W</code>, which is used when you want a <strong><em>decorator</em></strong> string that is placed immediately to the left or right of <strong><em>each</em></strong> row of simple objects in the right argument, <code>âµ</code>.</p>
<ul>
<li>The decorators are in <code>âº</code>, the left argument to <strong>Wrap</strong>: the left decorator, <code>0âŠƒ2â´âº</code>, and the right decorator, <code>1âŠƒ2â´âº</code>, with <code>âº</code> defaulting to a single quote.</li>
<li>If you need to omit one or the other decorator, simply make it a null string <code>&quot;&quot;</code> or a <em>zilde</em> <code>â¬</code>.</li>
</ul>
<div style="margin-left: 20px;">
<table>
<thead>
<tr>
<th style="text-align:left">Note</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">Â¹ <strong>Wrap</strong> differs from the <strong>Quote</strong> shortcut <code>`Q</code>, which puts quotes <strong><em>only</em></strong> around the character arrays in <code>âµ</code>. For more, see <strong>Wrap</strong> (<code>`W</code>) <strong>Details</strong> <em>below</em>.</td>
</tr>
</tbody>
</table>
</div>
<p><strong>Here are two simple examples.</strong></p>
<p>In the first, we place <code>&quot;âˆ˜C&quot;</code> after <strong>[a]</strong> each row of a table <code>âª`âµ2</code>, or <strong>[b]</strong> after each simple vector in <code>,Â¨`âµ2</code>. We indicate that is no <em>left</em> decorator here
using <code>&quot;&quot;</code> or <code>â¬</code>, as here.</p>
<pre><code>â         ... [a] ...       .... [b] ....
    âˆ†F '{ `âµ1 `W âª`âµ2 } ...{ `âµ1 `W ,Â¨`âµ2 }' (â¬ 'âˆ˜C')(18 22 33)
18âˆ˜C ... 18âˆ˜C 22âˆ˜C 33âˆ˜C
22âˆ˜C
33âˆ˜C
</code></pre>
<p>In this next example, we place brackets around the lines of each simple array in a complex array.</p>
<pre><code>   âˆ†F '{&quot;[]&quot; `W (&quot;cats&quot;)(â³2 2 1)(2 2â´â³4)(3 3â´â•A) }'
[cats] [0 0 0] [0 1] [ABC]
       [0 1 0] [2 3] [DEF]
                     [GHI]
       [1 0 0]
       [1 1 0]
</code></pre>
</div>
<p>Now, letâ€™s move on to Self-documenting <strong>Code fields</strong>.</p>
<h3>Self-documenting <strong>Code fields</strong> (SDCFs)</h3>
<blockquote>
<p>Self-documenting Code fields are a useful debugging tool.</p>
</blockquote>
<p>Whatâ€™s an SDCF? An SDCFÂ¹ allows whatever source code is in a <strong>Code Field</strong> to be automatically displayed literally along with the result of evaluating that code.</p>
<div style="margin-left: 25px;">
<table>
<thead>
<tr>
<th style="text-align:left">Note</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">Â¹ Our SDCFs are based on Pythonâ€™s single type of <strong><a href="https://docs.python.org/3/whatsnew/3.8.html#f-strings-support-for-self-documenting-expressions-and-debugging">self-documenting expressions</a></strong> in <em>f-strings</em>, but work somewhat differently. SDCFs are used <strong><em>only</em></strong> in <strong>Code fields</strong> (<em>duh</em>).</td>
</tr>
</tbody>
</table>
</div>
<p>You may automatically place the source for a <strong>Code field</strong>:</p>
<ul>
<li><code>â†’</code> to the left of the result of evaluating that code; or,</li>
<li><code>â†“</code> centered above the result of evaluating that code.</li>
</ul>
<p>All you have to do is place</p>
<ul>
<li>the right arrow <code>â†’</code> for a <strong>horizontal</strong> SDCF, or</li>
<li>the down arrow <code>â†“</code> for a <strong>vertical</strong> SDCF,</li>
</ul>
<p>as the <strong><em>last non-space</em></strong> in the <strong>Code field</strong>, before the <em>final</em> right brace.</p>
<p>Hereâ€™s an example of a horizontal SDCF, i.e. using <code>â†’</code>:</p>
<pre><code>   nameâ†'John Smith' â—‡ ageâ† 34
   âˆ†F 'Current employee: {nameâ†’}, {ageâ†’}.'
Current employee: nameâ†’John Smith, ageâ†’34.
</code></pre>
<p>As a useful formatting feature, whatever spaces are just <strong><em>before</em></strong> or <strong><em>after</em></strong> the symbol <strong>â†’</strong> or <strong>â†“</strong> are preserved <strong><em>verbatim</em></strong> in the output.</p>
<p>Hereâ€™s an example with such spaces: see how the spaces adjacent to the symbol <code>â†’</code> are mirrored in the output!</p>
<pre><code>   nameâ†'John Smith' â—‡ ageâ† 34
   âˆ†F 'Current employee: {name â†’ }, {ageâ†’ }.'
Current employee: name â†’ John Smith, ageâ†’ 34.
</code></pre>
<p>Now, letâ€™s look at an example of a vertical SDCF, i.e. using <code>â†“</code>:</p>
<pre><code>   nameâ†'John Smith' â—‡ ageâ† 34
   âˆ†F 'Current employee: {nameâ†“} {ageâ†“}.'
Current employee:  nameâ†“     ageâ†“.
                  John Smith  34
</code></pre>
<p>To make it easier to see, hereâ€™s the same result, but with a box around each field (using the <strong>Box</strong> option <code>0 0 1</code>).</p>
<pre><code>â  Box all fields
   0 0 1 âˆ†F 'Current employee: {nameâ†“} {ageâ†“}.'
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”¬â”€â”€â”€â”€â”¬â”€â”
â”‚Current employee: â”‚ nameâ†“    â”‚ â”‚ageâ†“â”‚.â”‚
â”‚                  â”‚John Smithâ”‚ â”‚ 34 â”‚ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”´â”€â”€â”€â”€â”´â”€â”˜
</code></pre>
<h3>The Above Shortcut</h3>
<blockquote>
<p>A cut above the rest</p>
</blockquote>
<p>Hereâ€™s a useful feature. Letâ€™s use the shortcut <code>%</code> to display one expression centered above another; itâ€™s called <strong>Above</strong> and can also be expressed as <code>`A</code>. Remember, <code>`âµ1</code> designates the <strong><em>first</em></strong> argument after the f-string itself, and <code>`âµ2</code> the <strong><em>second</em></strong>.</p>
<pre><code>   âˆ†F '{&quot;Employee&quot; % âª`âµ1} {&quot;Age&quot; % âª`âµ2}' ('John Smith' 'Mary Jones')(29 23)
Employee    Age
John Smith  29
Mary Jones  23
</code></pre>
<h3>Omega Shortcuts (Implicit)</h3>
<blockquote>
<p>The <em>next</em> best thing: the use of <code>`âµ</code> in <strong>Code field</strong> expressions</p>
</blockquote>
<p>We said weâ€™d present the use of omega shortcuts with implicit indices <code>`âµ</code> in <strong>Code fields</strong>.</p>
<p>The expression <code>`âµ</code> selects the <em>next</em> element of the right argument <code>âµ</code> to <strong>âˆ†F</strong>, defaulting to <code>`âµ1</code> when first encountered, i.e. if there are <strong><em>no</em></strong> <code>`âµ</code> elements to the <strong><em>left</em></strong> in the entire f-string. If there is any such expression (e.g. <code>`âµ5</code>), then <code>`âµ</code> points to the element after that one (here, <code>`âµ6</code>). If the item to the left is <code>`âµ</code>, then we simply increment the index by <code>1</code> from that one.</p>
<p><strong>Letâ€™s try an example.</strong> Here, we display arbitrary 2-dimensional expressions, one above the other.
<code>`âµ</code> refers to the <strong><em>next</em></strong> argument in sequence, left to right, starting with <code>`âµ1</code>, the first, i.e. <code>(âµâŠƒâ¨ 1+â•IO)</code>. So, from left to right <code>`âµ</code> is <code>`âµ1</code>, <code>`âµ2</code>, and <code>`âµ3</code>. <em>Easy peasy.</em></p>
<pre><code>   âˆ†F '{(â³2â´`âµ) % (â³2â´`âµ) % (â³2â´`âµ)}' 1 2 3
    0 0
  0 0 0 1
  1 0 1 1
0 0 0 1 0 2
1 0 1 1 1 2
2 0 2 1 2 2
</code></pre>
<p>Letâ€™s demonstrate here the equivalence of the <em>implicitly</em> and <em>explicitly</em> indexed <strong>Omega expressions</strong>!</p>
<pre><code>   aâ† âˆ†F '{(â³2â´`âµ) % (â³2â´`âµ) % (â³2â´`âµ)}' 1 2 3     â Implicit Omega expressions
   bâ† âˆ†F '{(â³2â´`âµ1) % (â³2â´`âµ2) % (â³2â´`âµ3)}' 1 2 3  â Explicit Omega expressions
   a â‰¡ b                                           â Are they the same?
1                                                  â Yes!
</code></pre>
<h3>Shortcuts With Individual Expressions</h3>
<p>Shortcuts often make sense with individual expressions, not just entire <strong>Code fields</strong>. They can be put in parentheses and manipulated like ordinary APL functions.
Here, we display one boxed value above the other.</p>
<pre><code>   âˆ†F '{(`B â³`âµ1) % `B â³`âµ2}' (2 2)(3 3)
  â”Œâ”€â”€â”€â”¬â”€â”€â”€â”
  â”‚0 0â”‚0 1â”‚
  â”œâ”€â”€â”€â”¼â”€â”€â”€â”¤
  â”‚1 0â”‚1 1â”‚
  â””â”€â”€â”€â”´â”€â”€â”€â”˜
â”Œâ”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”
â”‚0 0â”‚0 1â”‚0 2â”‚
â”œâ”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¤
â”‚1 0â”‚1 1â”‚1 2â”‚
â”œâ”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¤
â”‚2 0â”‚2 1â”‚2 2â”‚
â””â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”˜
</code></pre>
<p>There are loads of other examples to discover.</p>
<h3>A Shortcut for Dates and Times</h3>
<p><strong>âˆ†F</strong> supports a simple <strong>Date-Time</strong> shortcut <code>`T</code> built from <strong>1200âŒ¶</strong> and <strong>â•DT</strong>. It takes one or more Dyalog <code>â•TS</code>-format timestamps as the right argument and a date-time specification as the (optional) left argument. Trailing elements of a timestamp may be omitted, if they are not referenced in the specification string.</p>
<p>Letâ€™s look at the use of the <code>`T</code> (Date-Time) shortcut to show the
current time (now).</p>
<pre><code>   âˆ†F 'It is now {&quot;t:mm pp&quot; `T â•TS}.'
It is now 8:08 am.
</code></pre>
<p>Of course, the time displayed above will be the actual current time.</p>
<p>Hereâ€™s a fancier example (the power is in <code>1200âŒ¶</code> and <code>â•DT</code>).
(Weâ€™ve added the <em>truncated</em> timestamp <code>2025 01 01</code> right into the <strong><em>f-string</em></strong>.)</p>
<pre><code>   âˆ†F '{ &quot;D MMM YYYY ''was a'' Dddd.&quot;`T 2025 01 01}'
1 JAN 2025 was a Wednesday.
</code></pre>
<h3>A Shortcut for Dates and Times (Continued)</h3>
<p>If it bothers you to use <code>`T</code> for a date-only expression,
you can use <code>`D</code>, which means exactly the same thing.</p>
<pre><code>   âˆ†F '{ &quot;D MMM YYYY ''was a'' Dddd.&quot; `D 2025 01 02}'
2 JAN 2025 was a Thursday.
</code></pre>
<p>Here, weâ€™ll pass the time stamp via a single omega
expression (hence it is in parentheses): <code>`âµ1</code>.</p>
<pre><code>   âˆ†F '{ &quot;D Mmm YYYY ''was a'' Dddd.&quot; `T `âµ1}' (2025 1 21)
21 Jan 2025 was a Tuesday.
</code></pre>
<p>We could also pass the time stamp via a sequence of omega
expressions: <code>`âµ `âµ `âµ</code>.
This is equivalent to the <em>slightly</em> verbose
expression: <code>`âµ1 `âµ2 `âµ3</code>.</p>
<pre><code>   âˆ†F '{ &quot;D Mmm YYYY ''was a'' Dddd.&quot; `T `âµ `âµ `âµ}' 2025 1 21
21 Jan 2025 was a Tuesday.
</code></pre>
<h3>Precomputed F-strings with the <em><strong>DFN</strong></em> Option</h3>
<p>The default returned from <strong>âˆ†F</strong> is always (on success) a character matrix. That can be expressed via <code>âˆ†F...</code> or <code>0 âˆ†F...</code>.Â¹ However, if the initial option (<strong><em>DFN</em></strong>) is <code>1</code>, i.e. the call is <code>1 âˆ†F...</code>, <strong>âˆ†F</strong> returns a dfn thatâ€” when called laterâ€” will return the same expression.Â² This is most useful when you are likely to make repeated use an f-string, since the overhead for examining the f-string contents <em>once</em> would be amortized over all the calls.</p>
<div style="margin-left: 25px;">
<table>
<thead>
<tr>
<th style="text-align:left">Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">Â¹ We discuss the options to <strong>âˆ†F</strong> at the end of this documentation.</td>
</tr>
<tr>
<td style="text-align:left">Â² This assumes the resulting dfn is called with the same arguments in the same calling environment in the same state.</td>
</tr>
</tbody>
</table>
</div>
<p>Letâ€™s explore getting the best performance for a heavily
used <strong>âˆ†F</strong> string. Using the DFN option <code>(âº[0]=1)</code>, we can generate a
dfn that will display the formatted output, without having to reanalyze
the f-string each time.
We will compare the performance of an <strong>âˆ†F</strong>-string evaluated on the fly.</p>
<pre><code>   mxâ† âˆ†F '...'
</code></pre>
<p>versus one precomputed and returned as a dfn, using</p>
<pre><code>   dfnâ† 1 âˆ†F '...'
</code></pre>
<blockquote>
<p>First, letâ€™s grab <code>cmpx</code>, so we can compare the performanceâ€¦</p>
</blockquote>
<pre><code>   'cmpx' â•CY 'dfns'
</code></pre>
<p>Now, letâ€™s proceed. Hereâ€™s the code:</p>
<pre><code>   Câ† 11 30 60

â Here's our âˆ†F String t
   tâ†'The temperature is {&quot;I2&quot; $ C}Â°C or {&quot;F5.1&quot; $ Fâ† 32+9Ã—CÃ·5}Â°F'

â  Let's precompute a dfn T, given âˆ†F String t.
â  It has everything needed to generate the output,
â  except the external variables or additional arguments needed.
   Tâ†1 âˆ†F t

â  Compare the performance of the two formats...
â  The precomputed version is about 17 times faster, in this run.
   cmpx 'âˆ†F t' 'T â¬'
âˆ†F t â†’ 1.7EÂ¯4 |   0% â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 T â¬ â†’ 1.0EÂ¯5 | -94% â•â•
</code></pre>
<blockquote>
<p>Before we get to syntax and other informationâ€¦</p>
</blockquote>
<p>Finally, we want to show you that the <em>dfn</em> returned from <code>1 âˆ†F...</code> can retrieve argument(s) passed on the right side of <strong>âˆ†F</strong>. In fact, the f-string text <strong><em>originally</em></strong> passed when the <em>dfn</em> was generated is stored with the <em>dfn</em> itself as <code>`âµ0</code>, available for use.</p>
<p>So, as a variation on the example above, we will pass the centigrade value,
not as a variable, but as the first argument to <strong>âˆ†F</strong> (i.e. <code>`âµ1`</code>).</p>
<pre><code>   tâ†'The temperature is {&quot;I2&quot; $ `âµ1}Â°C or {&quot;F5.1&quot; $ Fâ† 32+9Ã—`âµ1Ã·5}Â°F'
   Tâ† 1 âˆ†F t

   âˆ†F t 35
The temperature is 35Â°C or 95.0Â°F

   T 35
The temperature is 35Â°C or 95.0Â°F

   cmpx 'âˆ†F t 35' 'T 35'
âˆ†F t 35 â†’ 1.7EÂ¯4 |   0% â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   T 35 â†’ 8.9EÂ¯6 | -95% â•â•
</code></pre>
<p>Below, we summarize key information youâ€™ve already gleaned from the examples.</p>
<h2>âˆ†F Syntax and Other Information</h2>
<h3>âˆ†F Call Syntax Overview</h3>
<table>
<thead>
<tr>
<th style="text-align:left">Call Syntax <div style="width:200px"></div></th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>âˆ†F</strong> <em>f-string</em></td>
<td style="text-align:left">Display an <em>f-string</em>; use the <em>default</em> options. The string may reference objects in the environment or in the string itself. Returns a character matrix.</td>
</tr>
<tr>
<td style="text-align:left"><strong>âˆ†F</strong> <em>f-string</em> <em>arg1</em> [<em>arg2</em> â€¦]</td>
<td style="text-align:left">Display an <em>f-string</em>; use the <em>default</em> options. Arguments presented <em>may</em> be referred to in the f-string. Returns a character matrix.</td>
</tr>
<tr>
<td style="text-align:left"><em>options</em> <strong>âˆ†F</strong> <em>f-string</em> [<em>args</em>]</td>
<td style="text-align:left">Display an <em>f-string</em>; control the result with <em>options</em> specified (see below).</td>
</tr>
<tr>
<td style="text-align:left"></td>
<td style="text-align:left">If the initial option (DFN) is <strong>0</strong> or omitted, returns a character matrix.</td>
</tr>
<tr>
<td style="text-align:left"></td>
<td style="text-align:left">If the initial option (DFN) is <strong>1</strong>, returns a dfn that will display such a matrix (given an identical system state).</td>
</tr>
<tr>
<td style="text-align:left">â€˜helpâ€™ <strong>âˆ†F</strong> â€˜â€™</td>
<td style="text-align:left">Display help info and examples for <strong>âˆ†F</strong>. The <em>f-string</em> is not examined.</td>
</tr>
<tr>
<td style="text-align:left"><strong>âˆ†F</strong>â¨â€™helpâ€™</td>
<td style="text-align:left">Display help info and examples for <strong>âˆ†F</strong>.</td>
</tr>
</tbody>
</table>
<h3>âˆ†F Call Syntax Details</h3>
<table>
<thead>
<tr>
<th style="text-align:left">Element <div style="width:200px"></div></th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong><em>f-string</em></strong></td>
<td style="text-align:left">a format string, a single character vector.</td>
</tr>
<tr>
<td style="text-align:left"><strong><em>args</em></strong></td>
<td style="text-align:left">elements of âµ after the f-string, each of which can be accessed in the f-string via a <strong>`âµ</strong> shortcut (or ordinary <strong>âµ</strong> expression)</td>
</tr>
<tr>
<td style="text-align:left"><strong><em>options</em></strong></td>
<td style="text-align:left">[ optionsâ† [ 0 [ 0 [ 0 [ 0 ] ] ] ] | â€˜helpâ€™ ]</td>
</tr>
<tr>
<td style="text-align:left">Â Â options[0] (<small><strong><em>DFN</em></strong></small>)</td>
<td style="text-align:left">If <code>1</code>, <strong>âˆ†F</strong> returns a dfn, which (upon execution) produces the same output as the default mode. Default: <strong>âˆ†F</strong> returns a char. matrix.</td>
</tr>
<tr>
<td style="text-align:left">Â Â options[1] (<small><strong><em>DBG</em></strong></small>)</td>
<td style="text-align:left">If <code>1</code>: displays the code that the f-string <strong><em>actually</em></strong> generates (if <strong><em>DFN</em></strong> is set to <code>1</code>, this will include the embedded f-string <em>source</em> as <code>`âµ0</code>).</td>
</tr>
<tr>
<td style="text-align:left">Â Â options[2] (<small><strong><em>BOX</em></strong></small>)</td>
<td style="text-align:left">If <code>1</code>, each field (except a Null Text field) is boxed separately. If <code>0</code>, you may box any <strong>Code fields</strong> you want using the <em>box</em> <code>`B</code> routine.<br><strong>BOX</strong> mode can be used both with <strong>DFN</strong> and default output mode.</td>
</tr>
<tr>
<td style="text-align:left">Â Â options[3] (<small><strong><em>INLINE</em></strong></small>)</td>
<td style="text-align:left">If <code>1</code>, a copy of each needed internal support function is included in the result. If <code>0</code>, calls are made to the library created when âˆ†F was loaded.<br>Setting <strong><em>INLINE</em></strong> to <code>1</code> is only useful if the <strong>DFN</strong> option is set. This option is experimental and may simply disappear one day.</td>
</tr>
<tr>
<td style="text-align:left">Â Â â€˜helpâ€™</td>
<td style="text-align:left">If <code>'help'</code> is specified, this amazing documentation is displayed.</td>
</tr>
<tr>
<td style="text-align:left"><strong><em>result</em></strong></td>
<td style="text-align:left">If <code>0=âŠƒoptions</code>, the result is always a character matrix. If <code>1=âŠƒoptions</code>, the result is a dfn that, <em>when executed in the same environment with the same arguments</em>, generates that same character matrix. <br>If an error is signalled, no result is returned.</td>
</tr>
</tbody>
</table>
<h3>âˆ†F Options</h3>
<ul>
<li>If the left argument <code>âº</code> is omitted, the options default to <code>4â´0</code>.</li>
<li>If the left argument <code>âº</code> is a simple boolean vector or scalar, or an empty numeric vector <code>â¬</code>, the options are <code>4â†‘âº</code>; subsequent elements are ignored;</li>
<li>If the left argument <code>âº</code> starts with <code>'help'</code> (case ignored), this help information is displayed.</li>
<li>Otherwise, an error is signaled.</li>
</ul>
<h3>âˆ†F Return Value</h3>
<ul>
<li>Unless the <strong>DFN</strong> option is selected, <strong>âˆ†F</strong> always returns a character matrix of at least one row and zero columns, <code>1 0â´0</code>, on success. If the â€˜helpâ€™ option is specified, <strong>âˆ†F</strong> displays this information, returning <code>1 0â´0</code>.</li>
<li>If the <strong>DFN</strong> option is selected, <strong>âˆ†F</strong> always returns a standard Dyalog dfn on success.</li>
<li>On failure of any sort, an informative APL error is signaled.</li>
</ul>
<h3>âˆ†F F-string Building Blocks</h3>
<p>The first element in the right arg to âˆ†F is a character vector, an <strong>f-string</strong>,
which contains 3 types of fields: <strong>Text fields</strong>, <strong>Code fields</strong>, and <strong>Space fields</strong>.</p>
<ul>
<li>
<p><strong>Text fields</strong> consist of simple text, which may include any Unicode characters desired, including newlines. Newlines (actually, carriage returns, <code>â•UCS 13</code>) are normally entered via the sequence <code>`â—‡</code>. Additionally, literal curly braces can be added via <code>`{</code> and <code>`}</code>, so there is no confusion with the simple curly braces used to begin and end <strong>Code fields</strong> and <strong>Space Fields</strong>. Finally, a simple backtick escape can be entered into a <strong>Text field</strong> by simply entering two such characters <code>``</code>.</p>
</li>
<li>
<p><strong>Code fields</strong> are run-time evaluated expressions enclosed within
simple, unescaped curly braces <code>{}</code>, i.e. those not preceded by a back-tick (see the previous paragraph). <strong>Code fields</strong> are essentially a Dyalog dfn with some extras. For escape sequences, see <strong>Escape Sequences</strong> below.</p>
</li>
<li>
<p><strong>Space fields</strong> are essentially a <em>degenerate</em> form of <strong>Code fields</strong>, consisting of a single pair of simple curly braces <code>{}</code> with zero or more spaces in between. A <strong>Space Field</strong> with zero spaces is a <strong>Null Space Field</strong>; while it may separate any other fields, its practical use is separating two adjacent <strong>Text Fields</strong>.</p>
</li>
</ul>
<p>The building blocks of an <strong>f-string</strong> are these defined â€œfields,â€ catenated left to right,
each of which will display as a logically separate 2-D (matrix) output space. While <strong>Code fields</strong> can return arrays of any number of dimensions mapped onto 2-D by APL <code>â•FMT</code> rules, <strong>Text fields</strong> and <strong>Space fields</strong> are always simple rectangles (minimally 1 row and zero columns). Between fields, <strong>âˆ†F</strong> adds no automatic spaces; that spacing is under user control.</p>
<h3>Escape Sequences For Text Fields and Quoted Strings</h3>
<p><strong>âˆ†F</strong> <strong>Text fields</strong> and <strong>Quoted strings</strong> in <strong>Code fields</strong> may include
a small number of escape sequences, beginning with the backtick <code>`</code>.</p>
<table>
<thead>
<tr>
<th style="text-align:center">Â SequenceÂ </th>
<th style="text-align:center">Â LiteralÂ </th>
<th style="text-align:center">Â MeaningÂ </th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">`â—‡</td>
<td style="text-align:center">(newline)</td>
<td style="text-align:center">Â  (â•UCSÂ 13)Â </td>
</tr>
<tr>
<td style="text-align:center">``</td>
<td style="text-align:center">`</td>
<td style="text-align:center">backtick</td>
</tr>
<tr>
<td style="text-align:center">`{</td>
<td style="text-align:center">{</td>
<td style="text-align:center">left brace</td>
</tr>
<tr>
<td style="text-align:center">`}</td>
<td style="text-align:center">}</td>
<td style="text-align:center">right brace</td>
</tr>
</tbody>
</table>
<p>Other instances of the backtick character in <strong>Text fields</strong> or <strong>Quoted strings</strong> in <strong>Code fields</strong> will be treated literally, <em>i.e.</em>
sometimes a backtick is just a backtick.</p>
<h3>Code Field Shortcuts</h3>
<p><strong>âˆ†F</strong> <strong>Code fields</strong> may contain various shortcuts, intended to be concise and expressive tools for common tasks. <strong>Shortcuts</strong> are valid <strong>only</strong> outside <strong>Quoted strings</strong>. They include:</p>
<table>
<thead>
<tr>
<th style="text-align:left">Shortcut <div style="width:100px"></div></th>
<th style="text-align:left">Name <div style="width:150px"></div></th>
<th style="text-align:left">Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">$, `F</td>
<td style="text-align:left">â•FMT</td>
<td style="text-align:left"><code>[âº] $ âµ</code>. Short for <code>[âº] â•FMT âµ</code>. (See APL documentation).</td>
</tr>
<tr>
<td style="text-align:left">%, `A</td>
<td style="text-align:left">Above</td>
<td style="text-align:left"><code>[âº] % âµ</code>. Centers array <code>âº</code> above array <code>âµ</code>. If omitted, <code>âºâ†''</code>, i.e. a blank line.</td>
</tr>
<tr>
<td style="text-align:left">`B</td>
<td style="text-align:left">Box</td>
<td style="text-align:left"><code>`B âµ</code>. Places <code>âµ</code> in a box. <code>âµ</code> is any array.</td>
</tr>
<tr>
<td style="text-align:left">`C</td>
<td style="text-align:left">Commas</td>
<td style="text-align:left"><code>`C âµ</code>. Adds commas to <code>âµ</code> after every 3rd digit of the integer part of <code>âµ</code>, right-to-left. <code>âµ</code> is a vector of num strings or numbers.</td>
</tr>
<tr>
<td style="text-align:left">`Q</td>
<td style="text-align:left">Quote</td>
<td style="text-align:left"><code>[âº]`Q âµ</code>. Recursively scans <code>âµ</code>, putting char. vectors, scalars, and rows of higher-dimensional strings in APL quotes, leaving other elements as is. If omitted, <code>âºâ†''''</code>.</td>
</tr>
<tr>
<td style="text-align:left">`T, `D</td>
<td style="text-align:left">Date-TimeÂ¹</td>
<td style="text-align:left"><code>[âº]`T âµ</code>. Displays timestamp(s) <code>âµ</code> according to date-time template <code>âº</code>. <code>âµ</code> is one or more APL timestamps <code>â•TS</code>. <code>âº</code> is a date-time template in <code>1200âŒ¶</code> format. If omitted, <code>âºâ† 'YYYY-MM-DD hh:mm:ss'</code>.</td>
</tr>
<tr>
<td style="text-align:left">`W <span style="color: red;font-size: 70%;"><strong>EXPERIMENTAL!</strong></span></td>
<td style="text-align:left">Wrap</td>
<td style="text-align:left"><code>[âº]`W âµ</code>. Wraps the rows of simple arrays in âµ in decorators <code>0âŠƒ2â´âº</code> (on the left) and <code>1âŠƒ2â´âº</code> (on the right). If omitted, <code>âºâ†''''</code>. <em>See details below.</em></td>
</tr>
<tr>
<td style="text-align:left">`âµğ‘‘ğ‘‘, â¹ğ‘‘ğ‘‘</td>
<td style="text-align:left">Omega Shortcut (explicitly indexed)</td>
<td style="text-align:left">A shortcut of the form <code>`âµğ‘‘ğ‘‘</code> (or <code>â¹ğ‘‘ğ‘‘</code>), to access the <code>ğ‘‘ğ‘‘</code><strong>th</strong> element of <code>âµ</code>, i.e. <code>(âµâŠƒâ¨ ğ‘‘ğ‘‘+â•IO)</code>. <em>See details below.</em></td>
</tr>
<tr>
<td style="text-align:left">`âµ, â¹</td>
<td style="text-align:left">Omega Shortcut (implicitly indexed)</td>
<td style="text-align:left">A shortcut of the form <code>`âµ</code> (or <code>â¹</code>), to access the <strong><em>next</em></strong> element of <code>âµ</code>. <em>See details below.</em></td>
</tr>
</tbody>
</table>
<hr>
<div style="margin-left: 20px;">
<table>
<thead>
<tr>
<th style="text-align:left">Note</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">Â¹ The syntax for the Date-Time specifications (left arg) can be found in the Dyalog documentation under <b>1200âŒ¶</b>. For the curious, hereâ€™s the code actually used by the Date-Time shortcut: <br>Â Â Â Â <code>{âºâ†'YYYY-MM-DD hh:mm:ss' â—‡ âˆŠâ£(1=â‰¡âµ)âŠ¢ âº(1200âŒ¶)âŠ¢ 1â•DT âŠ†âµ}</code>.</td>
</tr>
</tbody>
</table>
</div>
<hr>
<h3>Omega Shortcut Expressions: Details</h3>
<ol>
<li><strong>â¹</strong> is a synonym for <strong>`âµ</strong>. It is Unicode character <code>â•UCS 9081</code>. Either expression is valid only in <strong>Code</strong> fields and outside <strong>Quoted strings</strong>.</li>
<li><strong>`âµ</strong> or <strong>â¹</strong> uses an â€œ<em>omega index counter</em>â€ (<strong>OIC</strong>) which weâ€™ll represent as <strong>Î©</strong>, common across all <strong>Code</strong> fields, which is initially set to zero, <code>Î©â†0</code>. (Î© is just used for explication; donâ€™t actually use this symbol)</li>
<li>All omega shortcut expressions in the <strong>f-string</strong> are evaluated left to right and are â•IO-independent.</li>
<li><strong>`âµğ‘‘ğ‘‘</strong> or <strong>â¹ğ‘‘ğ‘‘</strong> sets the <em>OIC</em> to ğ‘‘ğ‘‘, <code>Î©â†ğ‘‘ğ‘‘</code>, and returns the expression <code>(âµâŠƒâ¨Î©+â•IO)</code>. Here <strong>ğ‘‘ğ‘‘</strong> must be a <em>non-negative integer</em> with at least 1 digit.</li>
<li>Bare <strong>`âµ</strong> or <strong>â¹</strong> (i.e. with no digits appended) increments the <em>OIC</em>, <code>Î©+â†1</code>, <em>before</em> using it as the index in the expression <code>(âµâŠƒâ¨Î©+â•IO)</code>.</li>
<li>You can only access the 0-th element of <strong>âµ</strong>, the <strong><em>f-string</em></strong> itself via an <em>explicitly indexed omega</em> <code>`âµ0</code> or <code>â¹0</code>. The <em>implicitly indexed</em> omega always increments its index <em>before</em> use, so the first index that can be used <strong><em>implicitly</em></strong> is <strong>1</strong>, i.e. <code>`âµ1</code> or <code>â¹1</code>.</li>
<li>If an element of the dfnâ€™s right argument <strong>âµ</strong> is accessed at runtime via any means, shortcut or traditional, that element <strong><em>must</em></strong> exist.</li>
</ol>
<div class="content-with-bar">
<h3>Wrap Shortcut: Details <span style="color: red;font-size: 80%;">Â <strong>(EXPERIMENTAL)</strong></span></h3>
<ol>
<li>Syntax: <code>[âºâ†''''] `W âµ</code>.</li>
<li>Let <code>Lâ†0âŠƒ2â´âº</code> and <code>Râ†1âŠƒ2â´âº</code>.</li>
<li>Wrap each row <code>Xâ€²</code> of the simple arrays <code>X</code> in <code>âµ</code> (or the entire array <code>X</code> if a simple vector or scalar) in decorators <code>L</code> and <code>R</code>: <code>L,(â•Xâ€²),R</code>.</li>
<li><code>âµ</code> is an array of any shape and depth.<code>L</code>and <code>R</code>are char. vectors or scalars or <code>â¬</code> (treated as <code>''</code>).</li>
<li>If there is one scalar or enclosed vector <code>âº</code>, it is replicated <em>per (2) above</em>.</li>
<li>By default,<code>âºâ† ''''</code>, i.e. APL quotes will wrap the array âµ, row by row, whether character, numeric or otherwise.</li>
</ol>
</div>
<hr>
<p><strong>Table of Contents</strong></p>
<span style="font-size: 70%;">
<ul>
<li><a href="#f--formatted-string-literals">âˆ†F â€” Formatted String Literals</a>
<ul>
<li><a href="#f-in-brief">âˆ†F In Brief</a></li>
</ul>
</li>
<li><a href="#f-help-information">âˆ†F <strong>Help</strong> Information</a></li>
<li><a href="#installing-f">Installing <strong>âˆ†F</strong></a></li>
<li><a href="#f-examples">âˆ†F EXAMPLES</a>
<ul>
<li><a href="#code-fields">Code Fields</a></li>
<li><a href="#space-fields">Space Fields</a></li>
<li><a href="#null-space-fields">Null Space Fields</a></li>
<li><a href="#code-fields-continued">Code Fields (Continued)</a></li>
<li><a href="#the-box-shortcut">The Box Shortcut</a></li>
<li><a href="#box-mode">Box Mode</a></li>
<li><a href="#omega-shortcuts-explicit">Omega Shortcuts (Explicit)</a></li>
<li><a href="#referencing-the-f-string-itself">Referencing the F-string Itself</a></li>
<li><a href="#the-format-shortcut">The Format Shortcut</a></li>
<li><a href="#the-shortcut-for-numeric-commas">The Shortcut for Numeric Commas</a></li>
<li><a href="#the-quote-shortcut">The Quote Shortcut</a></li>
<li><a href="#the-wrap-shortcut-experimental">The Wrap Shortcut (Experimental)</a></li>
<li><a href="#self-documenting-code-fields-sdcfs">Self-documenting <strong>Code fields</strong> (SDCFs)</a></li>
<li><a href="#the-above-shortcut">The Above Shortcut</a></li>
<li><a href="#omega-shortcuts-implicit">Omega Shortcuts (Implicit)</a></li>
<li><a href="#shortcuts-with-individual-expressions">Shortcuts With Individual Expressions</a></li>
<li><a href="#a-shortcut-for-dates-and-times">A Shortcut for Dates and Times</a></li>
<li><a href="#a-shortcut-for-dates-and-times-continued">A Shortcut for Dates and Times (Continued)</a></li>
<li><a href="#precomputed-f-strings-with-the-dfn-option">Precomputed F-strings with the <em><strong>DFN</strong></em> Option</a></li>
</ul>
</li>
<li><a href="#f-syntax-and-other-information">âˆ†F Syntax and Other Information</a>
<ul>
<li><a href="#f-call-syntax-overview">âˆ†F Call Syntax Overview</a></li>
<li><a href="#f-call-syntax-details">âˆ†F Call Syntax Details</a></li>
<li><a href="#f-options">âˆ†F Options</a></li>
<li><a href="#f-return-value">âˆ†F Return Value</a></li>
<li><a href="#f-f-string-building-blocks">âˆ†F F-string Building Blocks</a></li>
<li><a href="#escape-sequences-for-text-fields-and-quoted-strings">Escape Sequences For Text Fields and Quoted Strings</a></li>
<li><a href="#code-field-shortcuts">Code Field Shortcuts</a></li>
<li><a href="#omega-shortcut-expressions-details">Omega Shortcut Expressions: Details</a></li>
<li><a href="#wrap-shortcut-details-experimental">Wrap Shortcut: Details Â <strong>(EXPERIMENTAL)</strong></a></li>
</ul>
</li>
</ul>
<hr>
</span>
<p>Â© 2025 Sam the Cat Foundation. [20250911T160655]</p>

</body>
</html>
